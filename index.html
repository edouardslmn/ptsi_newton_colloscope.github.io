<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Colloscope PTSI 2025-2026</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700;800&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root{--bg:#0a0a0f;--bg2:#12121a;--card:rgba(255,255,255,.03);--card-h:rgba(255,255,255,.06);--border:rgba(255,255,255,.08);--txt:#fff;--txt2:#a0a0b0;--txt3:#606070;--blue:#3b82f6;--purple:#8b5cf6;--green:#10b981;--orange:#f59e0b;--pink:#ec4899;--red:#ef4444;--cyan:#06b6d4}
        [data-theme=light]{--bg:#f8f9fc;--bg2:#fff;--card:rgba(0,0,0,.02);--card-h:rgba(0,0,0,.04);--border:rgba(0,0,0,.08);--txt:#1a1a2e;--txt2:#4a4a5a;--txt3:#8a8a9a}
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:'DM Sans',sans-serif;background:var(--bg);color:var(--txt);min-height:100vh;transition:all .3s}
        .c{max-width:1200px;margin:0 auto;padding:0 20px}
        header{padding:16px 0;position:sticky;top:0;z-index:100;background:var(--bg);border-bottom:1px solid var(--border)}
        .hd{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:12px}
        .logo{font-family:Outfit;font-size:1.4rem;font-weight:700;background:linear-gradient(135deg,var(--blue),var(--purple));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
        .ha{display:flex;align-items:center;gap:10px}
        .tb{width:40px;height:40px;border-radius:10px;border:1px solid var(--border);background:var(--card);cursor:pointer;font-size:1.1rem}
        .tb:hover{background:var(--card-h)}
        .ub{display:flex;align-items:center;gap:8px;padding:5px 12px 5px 5px;background:var(--card);border:1px solid var(--border);border-radius:50px;cursor:pointer}
        .ua{width:28px;height:28px;border-radius:50%;background:linear-gradient(135deg,var(--blue),var(--purple));display:flex;align-items:center;justify-content:center;font-family:Outfit;font-weight:600;font-size:.75rem;color:#fff}
        .un{font-weight:500;font-size:.85rem}
        .ug{font-size:.7rem;color:var(--txt3)}
        .lb{background:none;border:none;color:var(--txt3);cursor:pointer;padding:6px;border-radius:6px;font-size:1rem}
        .lb:hover{background:var(--card);color:var(--txt)}
        .ws{min-height:calc(100vh - 80px);display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;text-align:center}
        .ws.h{display:none}
        .wt{font-family:Outfit;font-size:clamp(2rem,5vw,3rem);font-weight:800;margin-bottom:10px}
        .wt .g{background:linear-gradient(135deg,var(--blue),var(--purple));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
        .wst{font-size:.95rem;color:var(--txt2);margin-bottom:36px;max-width:420px}
        .ss{width:100%;max-width:360px}
        .sc{position:relative;margin-bottom:10px}
        .si{width:100%;padding:14px 18px 14px 44px;font-size:.95rem;font-family:'DM Sans';background:var(--card);border:1px solid var(--border);border-radius:12px;color:var(--txt)}
        .si:focus{outline:none;border-color:var(--blue)}
        .si::placeholder{color:var(--txt3)}
        .sic{position:absolute;left:16px;top:50%;transform:translateY(-50%);color:var(--txt3)}
        .sl{background:var(--bg2);border:1px solid var(--border);border-radius:12px;max-height:280px;overflow-y:auto}
        .sl::-webkit-scrollbar{width:5px}
        .sl::-webkit-scrollbar-thumb{background:var(--border);border-radius:3px}
        .sti{padding:12px 14px;cursor:pointer;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:10px}
        .sti:last-child{border-bottom:none}
        .sti:hover{background:var(--card-h)}
        .sta{width:34px;height:34px;border-radius:8px;background:linear-gradient(135deg,var(--blue),var(--purple));display:flex;align-items:center;justify-content:center;font-family:Outfit;font-weight:600;font-size:.75rem;color:#fff}
        .stn{font-weight:500;font-size:.9rem}
        .stg{font-size:.7rem;color:var(--txt3)}
        .db{padding:24px 0 50px;display:none}
        .db.a{display:block;animation:fi .4s ease}
        @keyframes fi{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
        .wh{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px;flex-wrap:wrap;gap:14px}
        .wi h2{font-family:Outfit;font-size:1.4rem;font-weight:700;margin-bottom:3px}
        .wi p{color:var(--txt2);font-size:.85rem}
        .wn{display:flex;gap:6px}
        .wb{padding:9px 16px;border-radius:9px;border:1px solid var(--border);background:var(--card);color:var(--txt);font-family:'DM Sans';font-size:.8rem;font-weight:500;cursor:pointer}
        .wb:hover{background:var(--card-h)}
        .wb.a{background:linear-gradient(135deg,var(--blue),var(--purple));border-color:transparent;color:#fff}
        .dsb{background:linear-gradient(135deg,rgba(239,68,68,.1),rgba(239,68,68,.03));border:1px solid rgba(239,68,68,.2);border-radius:12px;padding:14px 18px;margin-bottom:20px;display:flex;align-items:center;gap:12px}
        .dsbi{width:38px;height:38px;border-radius:9px;background:rgba(239,68,68,.12);display:flex;align-items:center;justify-content:center;font-size:1.2rem}
        .dsb h3{font-family:Outfit;font-weight:600;color:var(--red);margin-bottom:2px;font-size:.9rem}
        .dsb p{color:var(--txt2);font-size:.8rem}
        .vb{background:linear-gradient(135deg,rgba(139,92,246,.1),rgba(236,72,153,.1));border:1px solid rgba(139,92,246,.2);border-radius:12px;padding:24px;text-align:center;margin-bottom:20px}
        .vb h3{font-family:Outfit;font-size:1.2rem;margin-bottom:5px}
        .vb p{color:var(--txt2);font-size:.85rem}
        .stt{font-family:Outfit;font-size:1.1rem;font-weight:600;margin-bottom:16px;display:flex;align-items:center;gap:8px}
        .stt::before{content:'';width:3px;height:18px;background:linear-gradient(135deg,var(--blue),var(--purple));border-radius:2px}
        .cg{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:14px;margin-bottom:32px}
        .cc{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:20px;position:relative;overflow:hidden;transition:all .3s}
        .cc::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:var(--ca)}
        .cc:hover{transform:translateY(-3px);box-shadow:0 12px 30px rgba(0,0,0,.15)}
        .cc.ma{--ca:#3b82f6}.cc.ph{--ca:#10b981}.cc.si{--ca:#f59e0b}.cc.an{--ca:#ec4899}.cc.fr{--ca:#8b5cf6}
        .cs{font-family:Outfit;font-size:1.05rem;font-weight:600;margin-bottom:14px;display:flex;align-items:center;gap:10px}
        .csi{width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:.95rem}
        .cc.ma .csi{background:rgba(59,130,246,.15)}.cc.ph .csi{background:rgba(16,185,129,.15)}.cc.si .csi{background:rgba(245,158,11,.15)}.cc.an .csi{background:rgba(236,72,153,.15)}.cc.fr .csi{background:rgba(139,92,246,.15)}
        .cd{display:flex;flex-direction:column;gap:10px}
        .cdi{display:flex;align-items:center;gap:10px;color:var(--txt2);font-size:.9rem}
        .cdic{width:28px;height:28px;border-radius:6px;background:var(--card-h);display:flex;align-items:center;justify-content:center;font-size:.85rem}
        .nc{text-align:center;padding:40px;color:var(--txt3);background:var(--card);border-radius:16px;border:1px dashed var(--border);grid-column:1/-1}
        .nci{font-size:2.5rem;margin-bottom:12px;opacity:.5}
        .ab{background:var(--card);border:1px dashed var(--border);border-radius:10px;padding:14px;text-align:center;margin:24px 0;color:var(--txt3);font-size:.75rem}
        @media(max-width:768px){.cg{grid-template-columns:1fr}.wh{flex-direction:column;align-items:flex-start}}
    </style>
</head>
<body>
<header><div class="c"><div class="hd">
    <div class="logo">Colloscope PTSI</div>
    <div class="ha">
        <button class="tb" onclick="toggleTheme()">üåô</button>
        <div class="ub" id="ub" style="display:none" onclick="showWelcome()">
            <div class="ua" id="ua">AB</div>
            <div><div class="un" id="un">-</div><div class="ug" id="ug">-</div></div>
        </div>
        <button class="lb" id="lb" style="display:none" onclick="logout()">üö™</button>
    </div>
</div></div></header>
<main class="c">
<section class="ws" id="ws">
    <h1 class="wt">Bienvenue sur<br><span class="g">Colloscope PTSI- Newton</span></h1>
    <p class="wst">S√©lectionne ton nom pour acc√©der √† tes colles personnalis√©es</p>
    <div class="ss">
        <div class="sc"><span class="sic">üîç</span><input type="text" class="si" id="si" placeholder="Rechercher..." oninput="filterS()"></div>
        <div class="sl" id="sl"></div>
    </div>
</section>
<section class="db" id="db">
    <div class="wh">
        <div class="wi"><h2 id="wt2">Semaine 1</h2><p id="wd">-</p></div>
        <div class="wn">
            <button class="wb" onclick="chW(-1)">‚Üê Pr√©c.</button>
            <button class="wb a" onclick="goNow()">Aujourd'hui</button>
            <button class="wb" onclick="chW(1)">Suiv. ‚Üí</button>
        </div>
    </div>
    <div id="vb"></div>
    <div id="dsb"></div>
    <h3 class="stt">Mes colles de la semaine</h3>
    <div class="cg" id="cg"></div>
    <div class="ab">üì¢ Espace publicitaire</div>
</section>
</main>
<script>
const S=[
{n:"CAMPANA Matthieu",g:1,s:"a"},{n:"BALLESIO--VALLIN Mathis",g:1,s:"b"},{n:"BAU Baptiste",g:1,s:"c"},
{n:"BECHET Alexis",g:2,s:"a"},{n:"BEJANI Yoann",g:2,s:"b"},{n:"BENALLEGUE Manel",g:2,s:"c"},
{n:"BERGER Valentin",g:3,s:"a"},{n:"BOUATOU Yann",g:3,s:"b"},{n:"BOURGOUIN Matthieu",g:3,s:"c"},
{n:"BRETON Perrine",g:4,s:"a"},{n:"BURNOD Arthur",g:4,s:"b"},{n:"CHAMEAU-CALMELS Pierre-Louis",g:4,s:"c"},
{n:"CHOUAR Kenza",g:5,s:"a"},{n:"COCHARD Antoine",g:5,s:"b"},{n:"CONDOMINES Oscar",g:5,s:"c"},
{n:"DABO Benjamin",g:6,s:"a"},{n:"DOMINGUES Alexandre",g:6,s:"b"},{n:"DUFA≈∏ Nicolas",g:6,s:"c"},
{n:"FOUQUES DUPARC Maxence",g:7,s:"a"},{n:"FOURMAINTRAUX Paul",g:7,s:"b"},{n:"GENDRON Marius",g:7,s:"c"},
{n:"GERVAIS Tom",g:8,s:"a"},{n:"GUIHENEUF Neil",g:8,s:"b"},{n:"GUILLO Antoine",g:8,s:"c"},
{n:"GERMAGNAN Corentin",g:9,s:"a"},{n:"GUILLONNEAU Antoine",g:9,s:"b"},{n:"HERVE Louann",g:9,s:"c"},
{n:"HIGUERA Esteban",g:10,s:"a"},{n:"HIRIART--LATROBE Hadrien",g:10,s:"b"},{n:"HORINOUCHI--BERGERON Gabriel",g:10,s:"c"},
{n:"JANGAL Maxence",g:11,s:"a"},{n:"LAMOUR Mathilde",g:11,s:"b"},{n:"LAUDILLAY Tim√©o",g:11,s:"c"},
{n:"MATHIS Paul",g:12,s:"a"},{n:"MONNIER Gaspard",g:12,s:"b"},{n:"PIERGA Baptiste",g:12,s:"c"},
{n:"OLIERIC Guillaume",g:13,s:"a"},{n:"POTTEAU Baptiste",g:13,s:"b"},{n:"RIGAL Edgar",g:13,s:"c"},
{n:"RINGUIER Thomas",g:14,s:"a"},{n:"SAINTONGE Louis",g:14,s:"b"},{n:"SLAMANI Edouard",g:14,s:"c"},
{n:"TIENGOU DES ROYERIES Maxence",g:15,s:"a"},{n:"TOMETY Owen",g:15,s:"b"},{n:"TRAOR√â Siss√©",g:15,s:"c"},
{n:"VOITURIN Jules",g:16,s:"a"},{n:"ZINK Julien",g:16,s:"b"},{n:"ALIBAY GANDJEE Ilyan",g:16,s:"c"}
];

const W=[
{d:"2025-09-01",n:1},{d:"2025-09-08",n:2},{d:"2025-09-15",n:3},{d:"2025-09-22",n:4},{d:"2025-09-29",n:5},
{d:"2025-10-06",n:6},{d:"2025-10-13",n:7,v:"Vacances de la Toussaint"},
{d:"2025-11-03",n:8},{d:"2025-11-10",n:9},{d:"2025-11-17",n:10},{d:"2025-11-24",n:11},
{d:"2025-12-01",n:12},{d:"2025-12-08",n:13},{d:"2025-12-15",n:14,v:"Vacances de No√´l"},
{d:"2026-01-05",n:15,v:"Semaine de SKI"},{d:"2026-01-12",n:16},{d:"2026-01-19",n:17},{d:"2026-01-26",n:18},
{d:"2026-02-02",n:19},{d:"2026-02-09",n:20},{d:"2026-02-16",n:21,v:"Vacances d'hiver"},
{d:"2026-03-09",n:22},{d:"2026-03-16",n:23},{d:"2026-03-23",n:24},{d:"2026-03-30",n:25},
{d:"2026-04-06",n:26},{d:"2026-04-13",n:27,v:"Vacances de printemps"},
{d:"2026-05-04",n:28},{d:"2026-05-11",n:29},{d:"2026-05-18",n:30},{d:"2026-05-25",n:31},{d:"2026-06-01",n:32}
];

// Cr√©neaux Maths
const mS=[{j:"lundi",h:"16h-17h",p:"M. Jondreville",r:"K302"},{j:"lundi",h:"17h-18h",p:"M. Jondreville",r:"K302"},{j:"lundi",h:"18h-19h",p:"M. Gibaud",r:"K219"},{j:"mardi",h:"10h25-11h25",p:"M. Sarfati",r:"K12"},{j:"mardi",h:"11h25-12h25",p:"M. Sarfati",r:"K12"},{j:"mardi",h:"16h30-17h30",p:"M. Gibaud",r:"K218"},{j:"mardi",h:"17h30-18h30",p:"M. Gibaud",r:"K218"},{j:"mercredi",h:"17h-18h",p:"M. Gibaud",r:"K219"}];

// Cr√©neaux Physique
const pS=[{j:"lundi",h:"16h-17h",p:"Mme Crosnier",r:"K301"},{j:"lundi",h:"17h-18h",p:"Mme Crosnier",r:"K301"},{j:"mardi",h:"10h25-11h25",p:"M. Pohon",r:"K07"},{j:"mardi",h:"11h25-12h25",p:"M. Pohon",r:"K07"},{j:"mardi",h:"16h30-17h30",p:"M. M√©zenge",r:"labo"},{j:"mardi",h:"17h30-18h30",p:"M. M√©zenge",r:"labo"},{j:"mercredi",h:"17h-18h",p:"M. Causse",r:"L129"},{j:"mercredi",h:"18h-19h",p:"M. Causse",r:"L129"}];

// Cr√©neaux SI
const sS=[{j:"lundi",h:"16h-17h",p:"M. Onillon",r:"K14"},{j:"lundi",h:"17h-18h",p:"M. Onillon",r:"K14"},{j:"lundi",h:"18h-19h",p:"M. M√©nard",r:"K12"},{j:"mardi",h:"18h-19h",p:"M. M√©nard",r:"K12"},{j:"mercredi",h:"17h-18h",p:"M. Onillon",r:"K12"},{j:"mercredi",h:"18h-19h",p:"M. Onillon",r:"K12"},{j:"jeudi",h:"16h30-17h30",p:"M. Houot",r:"K16"},{j:"jeudi",h:"17h30-18h30",p:"M. Houot",r:"K16"}];

// Cr√©neaux Anglais
const aS=[{j:"mardi",h:"10h30-11h30",p:"Mme Guillier",r:"K304"},{j:"mardi",h:"11h30-12h30",p:"Mme Guillier",r:"K304"},{j:"mardi",h:"12h30-13h30",p:"Mme Guillier",r:"K304"},{j:"mardi",h:"14h30-15h30",p:"Mme Guillier",r:"K304"},{j:"mardi",h:"15h30-16h30",p:"Mme Guillier",r:"K304"},{j:"mardi",h:"18h-19h",p:"Mme Gruber-Magitot",r:"K301"},{j:"jeudi",h:"17h-18h",p:"M. Babadjanian",r:"L203"},{j:"jeudi",h:"18h-19h",p:"M. Babadjanian",r:"L203"}];

// Cr√©neaux Fran√ßais
const frS=[
{j:"mardi",h:"10h30-11h",p:"Mme Sangouard",r:"K305"},{j:"mardi",h:"10h30-11h30",p:"Mme Sangouard",r:"K305"},
{j:"mardi",h:"11h-12h",p:"Mme Sangouard",r:"K305"},{j:"mardi",h:"11h30-12h30",p:"Mme Sangouard",r:"K305"},
{j:"mardi",h:"12h-13h",p:"Mme Sangouard",r:"K305"},{j:"mardi",h:"12h30-13h30",p:"Mme Sangouard",r:"K305"},
{j:"mardi",h:"13h30-14h30",p:"Mme Sangouard",r:"K305"},{j:"mardi",h:"14h-15h",p:"Mme Sangouard",r:"K305"},
{j:"mardi",h:"14h30-15h30",p:"Mme Sangouard",r:"K305"},
{j:"mercredi",h:"17h-17h30",p:"Mme Quennedey",r:"K105"},{j:"mercredi",h:"17h-18h",p:"Mme Quennedey",r:"K105"},
{j:"mercredi",h:"17h30-18h30",p:"Mme Quennedey",r:"K105"},{j:"mercredi",h:"18h-19h",p:"Mme Quennedey",r:"K105"},
{j:"jeudi",h:"17h-17h30",p:"Mme Sangouard",r:"K305"},{j:"jeudi",h:"17h-18h",p:"Mme Sangouard",r:"K305"},
{j:"jeudi",h:"17h30-18h30",p:"Mme Sangouard",r:"K305"},{j:"jeudi",h:"18h-19h",p:"Mme Sangouard",r:"K305"}
];

// Donn√©es Maths par semaine
const mD={4:[[4],[6],[10],[2],[16],[12],[8],[14]],5:[[1],[5],[7],[15],[9],[11],[3],[13]],6:[[10],[12],[2],[16],[4],[6],[14],[8]],7:[[15],[9],[3],[7],[11],[13],[1],[5]],8:[[2],[8],[4],[6],[14],[10],[12],[16]],9:[[5],[7],[13],[1],[11],[9],[15],[3]],10:[[12],[14],[2],[4],[10],[16],[6],[8]],11:[[15],[11],[3],[13],[1],[9],[5],[7]],12:[[6],[4],[16],[12],[2],[14],[8],[10]],13:[[3],[7],[9],[5],[13],[15],[1],[11]],14:[[16],[14],[4],[8],[6],[10],[2],[12]],16:[[11],[9],[1],[13],[7],[15],[3],[5]],17:[[8],[2],[14],[6],[10],[4],[16],[12]],18:[[3],[7],[15],[13],[9],[1],[11],[5]],19:[[14],[10],[4],[12],[2],[16],[6],[8]],20:[[13],[11],[5],[3],[1],[7],[9],[15]],21:[[6],[4],[10],[8],[14],[2],[16],[12]],22:[[3],[7],[1],[15],[5],[9],[13],[11]],23:[[10],[16],[8],[2],[12],[14],[6],[4]],24:[[15],[9],[3],[7],[13],[1],[11],[5]],25:[[8],[6],[10],[16],[12],[4],[14],[2]],26:[[5],[1],[13],[3],[11],[7],[9],[15]],27:[[12],[16],[2],[6],[8],[10],[4],[14]],28:[[11],[15],[1],[7],[5],[9],[13],[3]],29:[[2],[6],[12],[4],[10],[16],[8],[14]],30:[[5],[1],[7],[15],[3],[9],[11],[13]],31:[[14],[16],[6],[10],[2],[12],[8],[4]],32:[[9],[13],[3],[5],[11],[15],[7],[1]]};

// Donn√©es Physique par semaine
const pD={4:[[8],[4],[16],[2],[14],[6],[10],[12]],5:[[3],[7],[9],[15],[1],[5],[11],[13]],6:[[14],[10],[4],[16],[12],[8],[6],[2]],7:[[13],[15],[11],[7],[1],[9],[3],[5]],8:[[4],[6],[14],[8],[2],[10],[12],[16]],9:[[3],[5],[11],[1],[7],[13],[15],[9]],10:[[16],[12],[10],[4],[6],[8],[14],[2]],11:[[9],[15],[1],[13],[5],[11],[3],[7]],12:[[8],[6],[2],[12],[4],[14],[16],[10]],13:[[1],[3],[13],[5],[9],[15],[7],[11]],14:[[10],[16],[6],[14],[2],[12],[4],[8]],16:[[9],[11],[7],[13],[3],[15],[1],[5]],17:[[4],[8],[10],[6],[14],[12],[2],[16]],18:[[5],[1],[9],[13],[11],[3],[15],[7]],19:[[16],[14],[2],[12],[4],[8],[10],[6]],20:[[11],[13],[1],[3],[9],[7],[5],[15]],21:[[2],[6],[14],[8],[10],[12],[16],[4]],22:[[1],[3],[5],[15],[13],[7],[9],[11]],23:[[14],[10],[12],[2],[16],[8],[6],[4]],24:[[11],[15],[13],[7],[3],[5],[1],[9]],25:[[6],[2],[12],[16],[8],[4],[10],[14]],26:[[7],[5],[11],[3],[9],[1],[13],[15]],27:[[10],[12],[8],[6],[2],[16],[4],[14]],28:[[13],[11],[5],[7],[15],[3],[1],[9]],29:[[8],[2],[10],[4],[6],[14],[16],[12]],30:[[7],[5],[3],[15],[1],[9],[11],[13]],31:[[12],[14],[2],[10],[16],[6],[8],[4]],32:[[13],[9],[11],[5],[7],[15],[3],[1]]};

// Donn√©es SI par semaine
const siD={4:[[1],[3],[13],[15],[9],[11],[5],[7]],5:[[2],[4],[14],[16],[10],[12],[6],[8]],6:[[13],[15],[9],[11],[5],[7],[1],[3]],7:[[14],[16],[10],[12],[6],[8],[2],[4]],8:[[1],[3],[5],[7],[9],[11],[13],[15]],9:[[2],[4],[6],[8],[10],[12],[14],[16]],10:[[13],[15],[1],[3],[5],[7],[9],[11]],11:[[14],[16],[2],[4],[6],[8],[10],[12]],12:[[1],[3],[13],[15],[9],[11],[5],[7]],13:[[2],[4],[14],[16],[10],[12],[6],[8]],14:[[13],[15],[9],[11],[5],[7],[1],[3]],16:[[14],[16],[10],[12],[6],[8],[2],[4]],17:[[1],[3],[5],[7],[9],[11],[13],[15]],18:[[2],[4],[6],[8],[10],[12],[14],[16]],19:[[13],[15],[1],[3],[5],[7],[9],[11]],20:[[14],[16],[2],[4],[6],[8],[10],[12]],21:[[1],[3],[13],[15],[9],[11],[5],[7]],22:[[2],[4],[14],[16],[10],[12],[6],[8]],23:[[13],[15],[9],[11],[5],[7],[1],[3]],24:[[14],[16],[10],[12],[6],[8],[2],[4]],25:[[1],[3],[5],[7],[9],[11],[13],[15]],26:[[2],[4],[6],[8],[10],[12],[14],[16]],27:[[13],[15],[1],[3],[5],[7],[9],[11]],28:[[14],[16],[2],[4],[6],[8],[10],[12]],29:[[1],[3],[13],[15],[9],[11],[5],[7]],30:[[2],[4],[14],[16],[10],[12],[6],[8]],31:[[13],[15],[9],[11],[7],[5],[1],[3]],32:[[14],[16],[10],[12],[6],[8],[2],[4]]};

// Donn√©es Anglais par semaine
const aD={4:[[1],[3],[9],[7],[5],[11],[13],[15]],5:[[6],[8],[14],[4],[2],[12],[10],[16]],6:[[3],[9],[1],[13],[11],[5],[15],[7]],7:[[4],[12],[16],[10],[14],[2],[8],[6]],8:[[7],[13],[15],[5],[9],[1],[3],[11]],9:[[12],[16],[4],[6],[10],[14],[2],[8]],10:[[9],[1],[3],[15],[5],[11],[7],[13]],11:[[8],[14],[6],[12],[10],[16],[2],[4]],12:[[1],[3],[9],[7],[11],[5],[13],[15]],13:[[16],[4],[12],[2],[6],[8],[10],[14]],14:[[13],[15],[7],[11],[1],[3],[9],[5]],16:[[4],[12],[16],[2],[14],[10],[8],[6]],17:[[7],[9],[1],[11],[15],[13],[3],[5]],18:[[14],[6],[8],[16],[2],[4],[12],[10]],19:[[9],[1],[3],[15],[11],[7],[5],[13]],20:[[12],[16],[4],[14],[10],[6],[8],[2]],21:[[15],[7],[13],[11],[3],[5],[1],[9]],22:[[16],[4],[12],[10],[6],[8],[2],[14]],23:[[1],[3],[9],[7],[5],[13],[11],[15]],24:[[6],[8],[14],[4],[10],[2],[12],[16]],25:[[3],[9],[1],[13],[11],[15],[5],[7]],26:[[10],[4],[16],[12],[2],[14],[8],[6]],27:[[15],[7],[13],[11],[1],[9],[3],[5]],28:[[16],[12],[4],[2],[8],[10],[6],[14]],29:[[1],[11],[3],[15],[5],[7],[9],[13]],30:[[8],[14],[6],[16],[10],[2],[4],[12]],31:[[9],[1],[3],[13],[11],[5],[7],[15]],32:[[12],[4],[16],[2],[6],[10],[14],[8]]};

// Donn√©es Fran√ßais par semaine (sous-groupes)
const frD={
3:["","","","","","","","","","","","","","5a","5b","5c","11a"],
4:["","","","","","","","","","","","","","2a","2b","2c","14a"],
5:["","","","","","","","","","","","","","11b","11c","13a","13b"],
6:["","","","","","","","","","","","","","14b","14c","4a","4b"],
7:["","","","","","","","","","","","","","13c","15a","15b","15c"],
8:["","","","","","","","","","","","","","4c","16a","16b","16c"],
9:["","","","","","","","","","","","","","3a","3b","3c","1a"],
10:["","","","","","","","","","","","","","6a","6b","6c","8a"],
11:["","","","","","","","","","","","","","1b","1c","9a","9b"],
12:["","","","","","","","","","","","","","8b","8c","12a","12b"],
13:["","","","","","","","","","","","","","9c","7a","7b","7c"],
14:["","","","","","","","","","","","","","12c","10a","10b","10c"],
16:["","","","","","","","","","2b","2c","2a","5a","","","",""],
17:["","","","","","","","","","11a","11b","5b","5c","","","",""],
18:["","","","","","","","","","14a","14b","14c","11c","","","",""],
19:["","","","","","","","","","15a","15b","15c","13a","","","",""],
20:["","","","","","","","","","13b","13c","16a","16b","","","",""],
21:["","","","","","","","","","4b","4c","3a","16c","","","",""],
22:["","","","","","","","","","3b","3c","4a","1b","","","",""],
23:["","","","","","","","","","1a","1c","8c","6a","","","",""],
24:["","","","","","","","","","8a","8b","7a","6b","","","",""],
25:["","","","","","","","","","6c","7b","7c","10a","2c","2a","2b","5a"],
26:["","","","","","","","","","9a","9b","9c","10b","5b","5c","11a","11b"],
27:["13a","13b","13c","15a","15b","15c","","","","10c","12a","12b","12c","11c","14a","14b","14c"],
28:["4a","4b","4c","16a","16b","16c","","","","","","","","","","",""],
29:["3c","3a","3b","1a","1b","1c","","","","","","","","","","",""],
30:["6b","6c","6a","8a","8b","8c","","","","","","","","","","",""],
31:["","","","9b","9c","9a","7a","7b","7c","","","","","","","",""],
32:["","","","12a","12b","12c","10a","10b","10c","","","","","","","",""]
};

// DS
const dsD={2:"Maths",3:"Anglais",4:"Physique",5:"SI",6:"Maths",7:"Fran√ßais",8:"Physique",9:"SI",10:"Maths",11:"Anglais+Info",12:"Physique",13:"SI",14:"Maths",16:"Fran√ßais",17:"Physique",18:"SI",19:"Maths",20:"Anglais+Info",21:"Physique",22:"SI",23:"Maths",24:"Physique",25:"Fran√ßais",26:"SI",27:"Maths",30:"Physique",31:"SI",32:"Info"};

let st=null,wI=0,th='dark';

function init(){loadS();renderSL();if(st)showDb();goNow();}
function loadS(){try{const s=localStorage.getItem('cs');const t=localStorage.getItem('ct');if(s){const d=JSON.parse(s);st=S.find(x=>x.n===d.n);}if(t){th=t;applyT();}}catch(e){}}
function saveS(){if(st)localStorage.setItem('cs',JSON.stringify({n:st.n}));localStorage.setItem('ct',th);}
function toggleTheme(){th=th==='dark'?'light':'dark';applyT();saveS();}
function applyT(){document.documentElement.setAttribute('data-theme',th);document.querySelector('.tb').textContent=th==='dark'?'‚òÄÔ∏è':'üåô';}
function renderSL(f=''){const l=document.getElementById('sl');const fl=S.filter(s=>s.n.toLowerCase().includes(f.toLowerCase()));l.innerHTML=fl.map(s=>`<div class="sti" onclick="selS('${s.n.replace(/'/g,"\\'")}')"><div class="sta">${getI(s.n)}</div><div><div class="stn">${s.n}</div><div class="stg">Groupe ${s.g}${s.s}</div></div></div>`).join('');}
function filterS(){renderSL(document.getElementById('si').value);}
function selS(n){st=S.find(s=>s.n===n);saveS();showDb();}
function getI(n){const p=n.split(' ').filter(x=>x);return p.length>=2?(p[0][0]+p[p.length-1][0]).toUpperCase():n.slice(0,2).toUpperCase();}
function showDb(){document.getElementById('ws').classList.add('h');document.getElementById('db').classList.add('a');document.getElementById('ub').style.display='flex';document.getElementById('lb').style.display='block';updUB();updD();}
function showWelcome(){document.getElementById('ws').classList.remove('h');document.getElementById('db').classList.remove('a');}
function updUB(){document.getElementById('ua').textContent=getI(st.n);const p=st.n.split(' ');document.getElementById('un').textContent=p[p.length-1];document.getElementById('ug').textContent=`Groupe ${st.g}${st.s}`;}
function logout(){st=null;localStorage.removeItem('cs');document.getElementById('ws').classList.remove('h');document.getElementById('db').classList.remove('a');document.getElementById('ub').style.display='none';document.getElementById('lb').style.display='none';}
function goNow(){const t=new Date();let c=0,m=Infinity;W.forEach((w,i)=>{const d=Math.abs(t-new Date(w.d));if(d<m){m=d;c=i;}});wI=c;updD();}
function chW(d){wI=Math.max(0,Math.min(W.length-1,wI+d));updD();}
function updD(){updWI();if(st)renderC();}
function updWI(){const w=W[wI];const s=new Date(w.d);const e=new Date(s);e.setDate(e.getDate()+6);const o={day:'numeric',month:'long'};document.getElementById('wt2').textContent=`Semaine ${w.n}`;document.getElementById('wd').textContent=`Du ${s.toLocaleDateString('fr-FR',o)} au ${e.toLocaleDateString('fr-FR',{...o,year:'numeric'})}`;document.getElementById('vb').innerHTML=w.v?`<div class="vb"><h3>üèñÔ∏è ${w.v}</h3><p>Profite bien !</p></div>`:'';const ds=dsD[w.n];document.getElementById('dsb').innerHTML=ds?`<div class="dsb"><div class="dsbi">üìù</div><div><h3>DS de la semaine</h3><p>${ds} - L410-L413</p></div></div>`:''}

function renderC(){
    const g=document.getElementById('cg');
    const wn=W[wI].n;
    const c=findC(st,wn);
    if(!c.length){
        g.innerHTML='<div class="nc"><div class="nci">üéâ</div><p>Pas de colle cette semaine !</p></div>';
        return;
    }
    g.innerHTML=c.map(x=>`<div class="cc ${x.cl}"><div class="cs"><div class="csi">${x.ic}</div>${x.m}</div><div class="cd"><div class="cdi"><div class="cdic">üìÖ</div><span>${cap(x.j)}</span></div><div class="cdi"><div class="cdic">üïê</div><span>${x.h}</span></div><div class="cdi"><div class="cdic">üìç</div><span>Salle ${x.r}</span></div><div class="cdi"><div class="cdic">üë§</div><span>${x.p}</span></div></div></div>`).join('');
}

function findC(s,wn){
    const c=[];
    const g=s.g;
    const sg=s.g+s.s; // ex: "14c"
    
    // Maths, Physique, SI, Anglais (par groupe)
    [[mD,mS,'Maths','ma','‚àë'],[pD,pS,'Physique','ph','‚öõÔ∏è'],[siD,sS,'SI','si','‚öôÔ∏è'],[aD,aS,'Anglais','an','üá¨üáß']].forEach(([d,sl,m,cl,ic])=>{
        if(d[wn])d[wn].forEach((gs,i)=>{
            if(gs && gs.includes(g)){
                const t=sl[i];
                c.push({m,cl,ic,j:t.j,h:t.h,p:t.p,r:t.r});
            }
        });
    });
    
    // Fran√ßais (par sous-groupe)
    if(frD[wn]){
        frD[wn].forEach((v,i)=>{
            if(v===sg){
                const t=frS[i];
                c.push({m:'Fran√ßais',cl:'fr',ic:'üìñ',j:t.j,h:t.h,p:t.p,r:t.r});
            }
        });
    }
    
    return c;
}

function cap(s){return s.charAt(0).toUpperCase()+s.slice(1);}

init();
</script>
</body>
</html>
